{"version":3,"file":"js/320.df12154e.js","mappings":"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","sources":["webpack://vue_demo_gather/./src/views/InfiniteList/InfiniteList.vue","webpack://vue_demo_gather/./src/views/InfiniteList/InfiniteList.vue?722c","webpack://vue_demo_gather/./src/views/InfiniteList/Index.vue","webpack://vue_demo_gather/./src/views/InfiniteList/Index.vue?2c7c"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, renderSlot as _renderSlot, createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nimport _imports_0 from '@/assets/kk.jpg';\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\"\n}, null, -1);\n\nconst _hoisted_2 = {\n  class: \"left-section\"\n};\nconst _hoisted_3 = {\n  class: \"right-section\"\n};\nconst _hoisted_4 = {\n  class: \"title\"\n};\nconst _hoisted_5 = {\n  class: \"desc\"\n};\nimport { ref, computed, onMounted } from \"vue\";\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'InfiniteList',\n  props: {\n    // 获取真实显示列表数据\n    arr: {\n      type: Array,\n      default: () => []\n    },\n    // 列表item的高度\n    itemSize: {\n      type: Number,\n      default: 50\n    },\n    // 结束索引\n    end: {\n      type: Number,\n      default: 0\n    },\n    // 起始索引\n    start: {\n      type: Number,\n      default: 0\n    },\n    //替换数据字段\n    substitute: {\n      type: Object,\n      default: () => ({\n        key: \"id\",\n        title: \"title\",\n        content: \"content\"\n      })\n    },\n    // 回到顶部按钮位置\n    scrollTopBtnPos: {\n      type: Number,\n      default: 200\n    }\n  },\n\n  setup(__props) {\n    const props = __props; // 可显示的列表项数\n\n    let _visibleCount = 0; // 偏移量\n\n    let _startOffset = ref(0); // 起始索引\n\n\n    let _start = ref(props.start); // 结束索引\n\n\n    let _end = ref(props.end); // 列表item的高度\n\n\n    let _itemSize = ref(props.itemSize); // 滚动盒子实例\n\n\n    let _$refs = ref(); // 可视区域高度\n\n\n    let _screenHeight = ref(0); // 列表总高度\n\n\n    function listHeight() {\n      return props.arr.length * _itemSize.value;\n    } // 偏移量对应的style\n\n\n    function getTransform() {\n      return `translate3d(0,${_startOffset.value}px,0)`;\n    }\n\n    function scrollToTop() {\n      _$refs.value.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: \"smooth\"\n      });\n    }\n\n    const _visibleData = computed(() => {\n      // 3. 当 name 的值被修改后，触发 get 方法\n      return props.arr.slice(_start.value, Math.min(_end.value, props.arr.length));\n    });\n\n    function scrollEvent() {\n      // 当前滚动位置\n      const scrollTop = _$refs.value.scrollTop; // 此时的开始索引\n\n      _start.value = Math.floor(scrollTop / _itemSize.value); // 此时的结束索引\n\n      _end.value = _start.value + _visibleCount; // 此时的偏移量\n\n      _startOffset.value = scrollTop - scrollTop % _itemSize.value;\n    }\n\n    onMounted(() => {\n      _screenHeight.value = _$refs.value.parentNode.clientHeight || document.documentElement.clientHeight || document.body.clientHeight; // 可显示的列表项数\n\n      _visibleCount = Math.ceil(_screenHeight.value / _itemSize.value);\n      _end.value = _start.value + _visibleCount;\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"infinite-list-container\",\n        onScroll: scrollEvent,\n        ref_key: \"_$refs\",\n        ref: _$refs\n      }, [_withDirectives(_createElementVNode(\"div\", {\n        class: \"scrollTopBtn\",\n        onClick: scrollToTop,\n        title: \"回到顶部\"\n      }, [_renderSlot(_ctx.$slots, \"scrollTopBtn\", {}, () => [_hoisted_1])], 512), [[_vShow, _unref(_end) > __props.scrollTopBtnPos]]), _createElementVNode(\"div\", {\n        class: \"infinite-list-phantom\",\n        style: _normalizeStyle({\n          height: `${listHeight()}px`\n        })\n      }, null, 4), _createElementVNode(\"div\", {\n        class: \"infinite-list\",\n        style: _normalizeStyle({\n          transform: getTransform()\n        })\n      }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(_visibleData), item => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          class: \"infinite-list-item\",\n          key: item[__props.substitute.key],\n          style: _normalizeStyle({\n            height: _unref(_itemSize) + 'px',\n            lineHeight: _unref(_itemSize) + 'px'\n          })\n        }, [_renderSlot(_ctx.$slots, \"content\", {\n          itemData: item\n        }, () => [_createElementVNode(\"div\", _hoisted_2, _toDisplayString(item[__props.substitute?.title]), 1), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString(item[__props.substitute?.title]), 1), _createElementVNode(\"div\", _hoisted_5, _toDisplayString(item[__props.substitute?.content]), 1)])])], 4);\n      }), 128))], 4)], 544);\n    };\n  }\n\n});","/* unplugin-vue-components disabled */import script from \"./InfiniteList.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./InfiniteList.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./InfiniteList.vue?vue&type=style&index=0&id=e6bcfd1a&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import \"core-js/modules/es.array.push.js\";\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"box_L\"\n};\nconst _hoisted_2 = {\n  class: \"test_con\"\n};\nimport router from \"@/router\";\nimport InfiniteList from \"./InfiniteList\";\nimport InfiniteList2 from \"./InfiniteList\";\nimport { reactive } from \"vue\";\nexport default {\n  __name: 'Index',\n\n  setup(__props) {\n    let arr = reactive([]);\n\n    for (let index = 0; index < 100000; index++) {\n      arr.push({\n        id: index,\n        title: \"坤坤\",\n        content: `坤坤吃了 ${index} /碗`\n      });\n    }\n\n    const handleClicks = path => {\n      console.log(path);\n      router.push(`/about/${path}`);\n    };\n\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_unref(InfiniteList2), {\n        arr: _unref(arr)\n      }, {\n        content: _withCtx(({\n          itemData\n        }) => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", null, _toDisplayString(itemData.title), 1), _createElementVNode(\"div\", null, _toDisplayString(itemData.content), 1)])]),\n        _: 1\n      }, 8, [\"arr\"])]);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./Index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=4f181d7e&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","_","src","alt","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","__name","props","arr","type","Array","default","itemSize","Number","end","start","substitute","Object","key","title","content","scrollTopBtnPos","setup","__props","_visibleCount","_startOffset","_start","_end","_itemSize","_$refs","_screenHeight","listHeight","length","value","getTransform","scrollToTop","scrollTo","top","left","behavior","_visibleData","slice","Math","min","scrollEvent","scrollTop","floor","parentNode","clientHeight","document","documentElement","body","ceil","_ctx","_cache","onScroll","ref_key","ref","onClick","$slots","style","height","transform","item","lineHeight","itemData","__exports__","index","push","id","InfiniteList"],"sourceRoot":""}